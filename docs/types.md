# Types (`types.ts`)

## Overview

This module defines the core data structures used throughout the Notez application, primarily focusing on the `Note` object and related types for creation and updates. Centralizing type definitions ensures consistency and improves maintainability.

## Installation

These types are part of the core application source and are used internally. No separate installation is needed. Import them directly from `src/types.ts`.

```typescript
import type { Note, NewNoteData, UpdateNoteData } from '../types';
```

## Core Concepts

-   **Immutability**: While the types themselves don't enforce immutability, the application logic (especially the reducer) should treat state updates immutably.
-   **Clear Separation**: Types like `NewNoteData` and `UpdateNoteData` clearly distinguish between the data needed for creating a new note versus updating an existing one.
-   **Timestamping**: Includes `createdAt` and `updatedAt` fields to track note history, crucial for features like sorting and conflict resolution.

## API Reference

### Type: `Note`

Represents a single note within the application.

Properties:

-   `id` (string): Unique identifier for the note (e.g., UUID). Generated when a note is created.
-   `title` (string): The title of the note.
-   `content` (string): The main content of the note in Github Flavored Markdown format.
-   `createdAt` (string): ISO 8601 timestamp string indicating when the note was created.
-   `updatedAt` (string): ISO 8601 timestamp string indicating when the note was last updated.

### Type: `NewNoteData`

Represents the data required to create a new note, excluding fields generated by the system (`id`, `createdAt`, `updatedAt`).

```typescript
type NewNoteData = Omit<Note, 'id' | 'createdAt' | 'updatedAt'>;
// Equivalent to: { title: string; content: string; }
```

Properties:

-   `title` (string): The title for the new note.
-   `content` (string): The initial content for the new note.

### Type: `UpdateNoteData`

Represents the data required to update an existing note. All fields are optional, allowing partial updates. Excludes fields that shouldn't be directly updated (`id`, `createdAt`).

```typescript
type UpdateNoteData = Partial<Omit<Note, 'id' | 'createdAt'>>;
// Equivalent to: { title?: string; content?: string; updatedAt?: string }
// Note: updatedAt is typically handled by the update logic, not directly set by the user action payload.
```

Properties:

-   `title?` (string): An optional new title for the note.
-   `content?` (string): Optional new content for the note.
-   `updatedAt?` (string): Optional timestamp (usually set automatically during the update process).

## Usage Examples

```typescript
import type { Note, NewNoteData, UpdateNoteData } from '../types';

// Creating a new note object (example, actual creation involves generating id/timestamps)
const newNoteData: NewNoteData = {
  title: "My First Note",
  content: "# Hello World\n\nThis is my first note.",
};

// Updating an existing note (example)
const noteToUpdateId = 'some-existing-id';
const updateData: UpdateNoteData = {
  content: "# Hello World\n\nThis is updated content.",
  // title remains unchanged
};

// Example Note object
const existingNote: Note = {
  id: 'uuid-123',
  title: 'Existing Note',
  content: 'Some markdown content.',
  createdAt: '2023-10-27T10:00:00Z',
  updatedAt: '2023-10-27T11:30:00Z',
};
```

## Best Practices

-   Use these core types consistently across the application (state, props, function signatures).
-   When updating notes, prefer using `UpdateNoteData` for partial updates rather than fetching the full `Note` object, modifying it, and saving it back, unless necessary.
-   Ensure `id` uniqueness when creating new notes.
-   Manage `createdAt` and `updatedAt` timestamps automatically within the data persistence layer or reducer logic during note creation and updates.

## Troubleshooting

-   **Type Errors**: Ensure you are importing the correct types and that the data structures match the defined types. Check for missing or extra properties.
-   **Timestamp Issues**: Verify that timestamps are being generated and stored in the correct ISO 8601 format.

## Related Modules

-   `src/state/app-state.ts`: Uses the `Note` type within the `AppState`.
-   `src/state/app-reducer.ts`: Handles actions involving `Note` objects.
-   Data Persistence Layer (e.g., IndexedDB service): Will use these types for storing and retrieving note data.

## Changelog

-   **2025-04-22**: Initial definition of `Note`, `NewNoteData`, and `UpdateNoteData`.